local _, mb = ...
local L = LibStub("AceLocale-3.0"):GetLocale("MountBoss")

mb.const = {
   
   DebugPrefix = L["LocalDebugPrefix"],
   LocalPrefix = L["LocalPrefix"],
   SayPrefix = L["SayPrefix"],
   TooltipPrefix = L["TooltipPrefix"],
   versionumber = "0.6.1",
   maximum_mount_id = 1500,
   master_mount_id = {6,7,8,9,11,12,13,14,15,17,18,19,20,21,22,24,25,26,27,28,31,32,34,35,36,38,39,40,41,42,43,45,46,50,51,52,53,54,55,56,57,58,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,116,117,118,119,120,121,122,123,125,129,130,131,132,133,134,135,136,137,138,139,140,141,142,145,146,147,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,176,177,178,179,180,183,185,186,187,188,189,190,191,196,197,199,201,202,203,204,205,206,207,211,212,213,219,220,221,222,223,224,225,226,230,236,237,238,240,241,243,246,247,248,249,250,251,253,254,255,256,257,258,259,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,284,285,286,287,288,289,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,340,341,342,343,344,345,349,350,351,352,358,363,364,365,366,367,368,371,372,373,375,376,382,386,388,389,391,392,393,394,395,396,397,398,399,400,401,403,404,405,406,407,408,409,410,411,412,413,415,416,417,418,419,420,421,422,423,424,425,426,428,429,430,431,432,433,434,435,436,439,440,441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480,481,484,485,486,487,488,492,493,494,495,496,497,498,499,500,501,503,504,505,506,507,508,509,510,511,515,516,517,518,519,520,521,522,523,526,527,528,529,530,531,532,533,534,535,536,537,538,539,540,541,542,543,544,545,546,547,548,549,550,551,552,554,555,557,558,559,560,561,562,563,564,568,571,593,594,600,603,606,607,608,609,611,612,613,614,615,616,617,618,619,620,621,622,623,624,625,626,627,628,629,630,631,632,633,634,635,636,637,638,639,640,641,642,643,644,645,647,648,649,650,651,652,654,655,656,657,663,664,678,679,682,741,751,753,755,756,758,759,760,761,762,763,764,765,768,769,772,773,775,776,778,779,780,781,784,791,793,794,795,796,797,800,802,804,826,831,832,833,834,836,838,841,842,843,844,845,846,847,848,849,850,851,852,853,854,855,860,861,864,865,866,867,868,870,872,873,874,875,876,877,878,881,882,883,884,885,888,889,890,891,892,893,894,896,898,899,900,901,905,906,925,926,928,930,931,932,933,934,935,936,937,939,941,942,943,944,945,946,947,948,949,954,955,956,958,959,960,961,962,963,964,965,966,967,968,970,971,972,973,974,975,976,978,979,980,981,982,983,984,985,986,993,995,996,997,999,1006,1007,1008,1009,1010,1011,1012,1013,1015,1016,1018,1019,1025,1026,1027,1028,1030,1031,1032,1035,1038,1039,1040,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1053,1054,1057,1058,1059,1060,1061,1062,1063,1064,1166,1167,1169,1172,1173,1174,1175,1176,1178,1179,1180,1182,1183,1185,1190,1191,1192,1193,1194,1195,1196,1197,1198,1199,1200,1201,1203,1204,1205,1206,1207,1208,1209,1210,1211,1212,1213,1214,1215,1216,1217,1218,1219,1220,1221,1222,1223,1224,1225,1227,1229,1230,1231,1232,1237,1238,1239,1240,1242,1243,1245,1246,1247,1248,1249,1250,1252,1253,1254,1255,1256,1257,1258,1260,1262,1265,1266,1267,1269,1270,1271,1272,1282,1283,1285,1286,1287,1288,1289,1290,1292,1293,1297,1311,1313,1314,1315,1317,1318,1319,1320,1321,1322,1324,1326,1327,1328,1329,1346},
   -- If you edit the below lines you're lame.
   master_mount_score = {2,10,10,2,2,10,10,2,10,2,3,2,2,2,10,2,2,2,2,10,2,10,2,10,2,2,2,2,2,10,10,10,10,10,10,10,10,10,5,10,2,2,10,10,10,2,2,2,2,5,10,2,2,10,10,7,7,7,7,7,7,7,7,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,7,10,10,10,2,2,2,2,10,10,0,7,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,6,2,4,4,4,4,2,2,2,2,2,7,2,2,2,2,2,2,10,4,6,4,4,4,4,4,4,4,4,6,5,4,4,4,4,4,4,10,10,10,7,7,5,5,5,10,10,10,10,5,7,7,2,6,10,6,7,7,10,2,5,7,4,10,9,7,7,2,4,3,0,3,7,7,2,2,4,4,5,10,5,10,10,10,6,2,2,5,5,0,0,4,2,2,5,5,2,2,5,7,7,4,4,6,6,0,4,4,4,4,4,4,4,4,4,4,10,4,5,5,0,2,2,5,7,10,2,10,2,2,2,2,2,2,2,2,2,2,10,4,4,4,4,10,10,10,2,2,4,10,4,4,4,4,4,7,4,4,10,10,10,5,5,2,2,2,10,10,2,5,1,6,7,2,2,5,5,10,4,6,7,6,5,5,10,2,2,10,4,4,4,10,2,6,6,10,5,7,7,6,10,5,2,1,7,7,10,7,10,10,4,3,3,10,10,4,2,2,1,7,7,7,7,7,7,1,10,2,4,5,4,2,2,6,6,3,3,3,3,5,2,4,4,4,2,10,2,4,4,4,5,10,5,4,6,8,7,5,5,5,0,0,2,2,4,2,2,2,2,2,2,2,2,2,2,7,4,4,4,4,4,4,4,4,10,5,3,7,7,7,7,4,1,4,4,4,4,4,7,10,10,8,8,8,4,4,4,4,10,10,7,1,4,4,2,7,7,5,1,6,7,7,5,5,7,6,8,10,10,10,6,1,1,1,2,5,5,5,4,4,5,5,7,5,4,7,4,4,2,4,4,5,5,4,4,7,5,4,4,5,2,4,0,10,4,5,4,7,7,7,7,7,5,4,4,4,4,7,5,4,4,8,5,7,2,7,10,3,3,10,1,7,7,7,7,5,10,10,10,2,2,5,4,4,3,5,5,5,0,6,7,2,10,5,7,5,5,5,5,3,4,5,5,7,9,9,7,7,10,8,7,7,7,7,5,5,6,10,10,10,10,10,10,5,4,6,6,6,6,6,6,6,6,6,7,7,6,7,10,5,5,7,6,6,6,6,6,6,6,6,6,6,4,6,8,7,7,6,5,7,2,5,6,6,8,5,0,2,2,10,4,6,6,6,6,7,7,10,10,1,8,5,5,4,2,2,8,9,5,4,4,4,4,4,5,7,5,5,5,5,5,5,5,5,5,7,6,6,6,5,5,6,2,2,4,4,4,4,4,4,1,4,4,4,4,5,5,10,7,7,4,10,10,10,10,4,10,6,8,9,4,7,2,2,4,5,7,1,6,5,4,4,4,4,4,4,4,4,4,8,5,5,5,5,5,5,5,6,5,5,5,5,10,10,10,1,7,7,7,7,4,5,5,7,5,5,5,4,4,5,5,7,5,5,5,4,4,7,7,5,7,5,1,1,1,5,2,6,6,4,4,5,6,5,3,3,6,6,5,5,5,6,9,8,6,3,4,3,3,10,6,3,7,5,1,1,0,0,0,0,5,4,5,4,6,6,2,1,5,8,5,5,5,5,8,5,4,5,5,7,5,6,5,5,5,4,1},
   master_prestige_score = {0,11,11,0,0,11,11,0,11,0,0,0,0,0,11,0,0,0,0,11,0,11,0,11,0,0,0,0,0,11,11,11,11,11,11,11,11,11,1,11,0,0,11,11,11,0,0,0,0,0,11,0,0,11,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,6,11,0,0,0,0,11,11,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,10,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,8,8,2,1,0,0,8,8,0,0,0,3,2,0,0,8,0,8,2,0,0,0,1,0,8,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,10,0,2,6,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,1,1,1,1,0,0,0,1,1,8,0,8,0,0,0,0,0,0,0,0,0,0,0,0.5,0.5,0.5,0.5,0,0,0,0,0,1,8,1,10,10,10,10,0,0,0,8,8,1,1,1,1,0,0,0,0,0,0,0,0,2,0,0,1,1,1,1,0,0,0,0,0,2,0,0,6,1,1,1,0,0,1,1,0,1,1,2,1,0,0,0,0,2,2,8,1,0,8,0,0,0,0,0,0,0,0,0,0,0,2,1,2,0,0,0,0,1,2,2,0,0,0,0,1,1,1,1,1,0,0,0,0,0,8,0,1,1,0,1,8,2,1,5,3,1,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,1,0,1,1,8,2,0,3,3,3,0,0,0,0.5,0.5,0.5,0.5,1,0,0,8,1,1,1,2,0,0,0,8,8,0,0,0.5,0.5,0,0.5,0.5,2,0,5,2,2,1,1,2,2,1,8,8,8,0,0,0,0,0,1,1,0,1,0,1,0,3,0,0,2,0,1,0,1,0,1,0,0,0,2,0,0,0,0,0,1,7,8,0,0,0,0,0,2,2,2,1,0,1,0,0,2,1,0,1,3,0,2,0,4,3,0,0,1,0,3,1,2,2,1,8,8,8,0,0,0,1,0,2,0,2,0.5,0,5,1,0,7,0.5,5,2,2,2,2,1,1,1,3,0,7,4,1,2,9,0,2,2,2,2,1,4,3,8,8,8,8,8,8,1,0,1,1,1,1,1,1,1,0,0,2,2,4,2,3,2,1,2,2,1,1,1,0,0,0,0,0,0,0,1,2,2,2,1,1,0,0,0,0,0,3,2,0,0,0,11,1,1,1,1,1,2,2,0,8,0,7,1,0,1,0,0,3,7,1,1,1,1,1,1,1,2,2,1,1,1,1,0,1,1,1,2,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,2,2,0,8,8,8,8,0,8,1,1,2,0,2,0,0,0,0,2,0,1,0,2,0,1,1,0,1,1,1,1,4,1,5,0,0,1,1,1,2,0,0,0,0,7,5,10,0,2,2,2,2,0,0,0,2,0,1,0,1,1,1,1,1,1,1,1,0,0,1,1,2,3,2,0,0,0,1,0,1,2,1,1,2,1,3,0,1,5,5,0,0,3,2,2,2,1,0,2,0,0,2,2,0,3,0,0,0,0,0,0,0,0,0,0.5,0,0,0,0,0,0.5,4,1,1,1,1,0,1,1,1,0,1,2,0,3,1,1,0,0},
   
}

mb.var = {
   
   MountScore = 0,
   AverageMountScore = 0,
   PrestigeScore = 0,
   MountsUOOC = 0,
   TotalMountCount = 0,
   AllianceMountCount = 0,
   HordeMountCount = 0,
   GroupMountsLoggedCount = 0,
   GroupMountsOutCount = 0,
   GroupMountsOutofRange = 0,
   PlayerName = "",
   BuildMountData = false,
   BuildMountTableComplete = false,
   CalculateMountScoreComplete = false,
   AceCommDataOut = "",
   BuildDebug = false,
   DebugText = "",
   PlayerFaction = nil,
   MouseOverToolTipTable = {},
   ExternalMountScoreTable = {},
   ExternalPrestigeScoreTable = {},
   ExternalMountsUOOCTable = {},
   ExternalMountsTotalTable = {},
   
}

mb.func = {

}

mb.OwnedMountTable = {
   
   push = function(self,arg)
      local n = #self
      self[n + 1] = arg
   end,
   clear = function(self)
      while #self > 0 do
         local n = #self
         if (n > 0) then
            self[n] = nil
         end
      end
   end,
}

mb.OptionsUI = {

   name = L["GUI_CONF_TitleMain"],
   descStyle = "inline",
   type = "group",
   childGroups = "tab",
   args = {
      desc = {
         type = "description",
         name = L["GUI_CONF_Desc"],
         fontSize = "medium",
         order = 1
      },
      author = {
         type = "description",
         name = L["GUI_CONF_Author"],
         order = 2
      },
      version = {
         type = "description",
         name = L["GUI_CONF_VersionNum"](mb.const.versionumber),
         order = 3
      },
      UIheader = {
         type = "description",
         name = L["GUI_CONF_UITitleOptions"],
         fontSize = "large",
         order = 4
      },
      toggleui = {
         name = L["GUI_CONF_ToggleShowUI"],
         width = "full",
         descStyle = "inline",
         type = "toggle",
         order = 5,
         set = function(info, val)
            MountBoss_BB_Toggle()
         end,
         get = function(info) return not MountBoss_BBHidden end
      },
      toggleminimapbutton = {
         name = L["GUI_CONF_ToggleShowMMI"],
         descStyle = "inline",
         width = "full",
         type = "toggle",
         order = 6,
         set = function(info, val)
            MountBoss_MMI_Toggle()
         end,
         get = function(info) return not MountBossMMISavedVarTable.hide end
      },
      toggleminimapbuttontooltips = {
         name = L["GUI_CONF_ToggleMMITT"],
         desc = L["GUI_CONF_ToggleMMITTDesc"],
         descStyle = "inline",
         width = "full",
         type = "toggle",
         disabled = function() if MountBossMMISavedVarTable.hide == true then return true else return false end end,
         order = 7,
         set = function(info, val)
            MountBoss_MMITT_Toggle()
         end,
         get = function(info) return not MountBossMMISavedVarTable.MMITTHidden end
      },
      addonoptionsheader = {
         type = "description",
         name = L["GUI_CONF_AddonTitleOptions"],
         fontSize = "large",
         order = 8
      },
      buttonupdatemountdata = {
         name = L["GUI_CONF_ButtonUpdateMD"],
         type = "execute",
         order = 9,
         func = function()
            MountBoss_UpdateMountData()
         end,
      },
      updatemountdatadescription = {
         type = "description",
         name = L["GUI_CONF_ButtonUpdateMDDesc"],
         order = 10
      },
      buttoncreatemacros = {
         name = L["GUI_CONF_ButtonCreateMacros"],
         type = "execute",
         order = 11,
         func = function()
            MountBoss_CreateMacros()
         end,
      },
      createmacrosdescription = {
         type = "description",
         name = L["GUI_CONF_ButtonCreateMacrosDesc"],
         order = 12
      },
      debugheader = {
         type = "description",
         name = L["GUI_CONF_AddonTitleDebug"],
         fontSize = "large",
         order = 13
      },
      toggledebugmode = {
         name = L["GUI_CONF_ToggleDebugMode"],
         desc = L["GUI_CONF_ToggleDebugmodeDesc"],
         descStyle = "inline",
         width = "full",
         type = "toggle",
         order = 14,
         set = function(info, val)
            MountBossDebug_Toggle()
         end,
         get = function(info) return MountBossDebug_Mode end
      },
      toggleluaerrors = {
         name = L["GUI_CONF_ToggleLuaError"],
         desc = L["GUI_CONF_ToggleLuaErrordDesc"],
         descStyle = "inline",
         width = "full",
         type = "toggle",
         order = 15,
         set = function(info, val)
            MountBoss_LuaErr_Toggle()
         end,
         get = function(info) 
            if GetCVar("scriptErrors") == "1" then
               return  true
            else
               return  false
            end
         end
      },
      generatedebug = {
	     type = "execute",
         name = L["GUI_CONF_ButtonGenerateDebug"],
         order = 16,
         func = function()
            MountBossDebug_GenerateDebug()
         end,
      },
      generatedebugdescription = {
         type = "description",
         name = L["GUI_CONF_ButtonGenerateDebugDesc"],
         order = 17
      },
   }
}